<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Vishnu Bharathi</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://vishnubharathi.codes/"/>
  <updated>2021-04-01T23:08:49.025Z</updated>
  <id>https://vishnubharathi.codes/</id>
  
  <author>
    <name>Vishnu Bharathi</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>My first-ever conference talk üé§</title>
    <link href="https://vishnubharathi.codes/blog/my-first-ever-conference-talk/"/>
    <id>https://vishnubharathi.codes/blog/my-first-ever-conference-talk/</id>
    <published>2021-04-01T21:11:22.000Z</published>
    <updated>2021-04-01T23:08:49.025Z</updated>
    
    <content type="html"><![CDATA[<p>Last Saturday I had the chance to tick off one of the items from my wishlist - ‚ÄúGive a tech talk at a conference‚Äù.</p><p>One of the most pivotal points in my career is getting a free ticket to attend a JavaScript conference called <a href="https://jsfoo.in/2015/">JSFoo</a> back in 2015. I enjoyed and still enjoy watching conference talks like JSConf, GopherCon, etc. for hours. They bring in a new perspective, teach something new, help discover awesome people to follow, etc. - Also many thanks to conferences that upload their recording for free on YouTube. I am not sure if you know the consequences of those free videos - they literally helped me build a career :D</p><p>(alright, back to the topic)</p><p>I don‚Äôt usually speak up much in real life. But I recently felt that I haven‚Äôt been speaking up much about what I am busy doing at work and also some new perspective on CI/CD pipelines.</p><p>At the same time, I discovered that the GitHub Satellite conference is happening soon and CFPs are open for it.</p><blockquote class="twitter-tweet"><p lang="en" dir="ltr">GitHub Satellite is coming to India (well, virtually)!üéâ<br>We want to hear your stories about open source, secure development &amp; DevOps.<br>Submit a proposal to speak at GitHub Satellite India 2021 on March 26-27.<a href="https://t.co/uDsbubEIyh">https://t.co/uDsbubEIyh</a> <a href="https://t.co/N4Nxp28rHE">pic.twitter.com/N4Nxp28rHE</a></p>&mdash; GitHubIndia (@GitHubIndia) <a href="https://twitter.com/GitHubIndia/status/1358001577110368256?ref_src=twsrc%5Etfw">February 6, 2021</a></blockquote><p>Then struck the thought: Maybe I should give a talk because I am kind of doing some cool DevOps stuff with GitHub Actions at work. Maybe share about it?</p><p>So I headed to #conference channel in our work slack and told that I am planning to write a CFP for the conference and got help in reviewing my CFP. Waited curiously after submitting CFP in a few days because I did it for the first time ever.</p><p>Then came the mail.</p><p><img src="/images/gh-satellite-cfp-accepted.png" alt="cfp-accepted"></p><p>Got excited so excited at this point :)</p><p>Within some days the conference website was up - <a href="https://githubsatellite.com">https://githubsatellite.com</a></p><p><img src="/images/gh-satellite-talk-abstract.jpg" alt="abstract"></p><p><img src="/images/gh-satellite-speaker.jpg" alt="speaker"></p><p>Got even more excited after seeing these :D At this point, I still haven‚Äôt written down my talk yet. But passively brainstorming what to share in the talk here and there.</p><p>The conference is virtual - this helped because I am kind of shy, nervous and have definitely had stage fear :D The fact that the conference is virtual gave me a low barrier to entry. Shifted my mindset to it is going to be like being on a zoom call with a co-worker where I am explaining stuff.</p><p>I have found a useful approach to doing new stuff. It is called <a href="https://ted.com">https://ted.com</a> - Whenever I am trying to do something new I try to browse this website for videos dealing with the new stuff. In this case, it is ‚Äúpublic speaking‚Äù. Guess what there is a playlist that I needed: <a href="https://www.ted.com/playlists/226/before_public_speaking">Before public speaking</a></p><p>(binge-watched)</p><p>I really liked this video called <a href="https://www.ted.com/talks/melissa_marshall_talk_nerdy_to_me?referrer=playlist-before_public_speaking">Talk nerdy to me</a> in that playlist. It helped in removing my shyness. One other idea that got from that playlist is ‚Äútalks are essentially idea transferring methodology‚Äù. If we had an elegant idea about something that the world, we shouldn‚Äôt care about silly things like shyness to stop others from acquiring that idea :D</p><p>In the meantime came the speaker kit from GitHub! They comfortably stocked me with all gadgets that I need for the tech talk.</p><blockquote class="twitter-tweet"><p lang="en" dir="ltr">Thank you <a href="https://twitter.com/github?ref_src=twsrc%5Etfw">@github</a>/<a href="https://twitter.com/GitHubIndia?ref_src=twsrc%5Etfw">@GitHubIndia</a> for these lovely gadgets. üôè‚ù§Ô∏è<br><br>Deploying them to my desk is the first thing I want to do this weekend üòÄüë®‚Äçüíª <a href="https://t.co/0r3PyxCeLu">pic.twitter.com/0r3PyxCeLu</a></p>&mdash; Vishnu Bharathi (@scriptnull) <a href="https://twitter.com/scriptnull/status/1372945054243774467?ref_src=twsrc%5Etfw">March 19, 2021</a></blockquote><p>It wow-ed everyone around. Happens every time I receive free goodies :D</p><p>GitHub arranged a speaker coaching session that is optional to attend. I completely went in for it because I knew that it will definitely help me out. It was conducted in batches of speakers. We were supposed to get ready with the first few slides of our talk and go through them in front of the speaker coach. Then they give us honest feedback and ways to improve.</p><p>I completely bombed my coaching session. I think I was nowhere close to ready for it except that I felt to have nice presentation slides. The speaking coach was brutally honest and kind in what I was doing wrong and how I should go about fixing it. The problem was I had loose ends while talking which gave the idea that I wasn‚Äôt confident about what I was talking about.</p><p>From that point onward, things got real :D</p><p>Then came the technical rehearsal where we needed to set up the gadgets we received and check if lightning, audio, video, etc. are good by jumping into a zoom call with the event producers. Followed up by sending over my entire deck of slides to the event organizer and a dress rehearsal.</p><p>Finally, it was happening :)</p><blockquote class="twitter-tweet"><p lang="en" dir="ltr">Friends, I am presenting a lightning tech talk at <a href="https://twitter.com/hashtag/GitHubSatellite?src=hash&amp;ref_src=twsrc%5Etfw">#GitHubSatellite</a> (kind of my first-ever proper tech talk üòÑ)<br><br>If you are interested in learning how we build internal dev tools at <a href="https://twitter.com/HasuraHQ?ref_src=twsrc%5Etfw">@HasuraHQ</a>, tune in to <a href="https://t.co/dPngNVra99">https://t.co/dPngNVra99</a> tomorrow at 11:45 AM IST. <a href="https://t.co/kZaDH5bBli">pic.twitter.com/kZaDH5bBli</a></p>&mdash; Vishnu Bharathi (@scriptnull) <a href="https://twitter.com/scriptnull/status/1375479210551074818?ref_src=twsrc%5Etfw">March 26, 2021</a></blockquote><p>Here is the <a href="https://youtu.be/YXBFTDdf1-E?t=8766">link</a> to the awesome MCs introducing me and passing me the mic. Wow, that gave me the feel of attending a physical conference.</p><p>Finally, here is the recording of my first-ever conference talk.</p><center><br><iframe width="560" height="315" src="https://www.youtube.com/embed/IeptXqgu_k8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br></center><p>Everything went well! I feel that I did better than what I was thinking to do (lol, kind of reliving to write it).</p><p>I would definitely like to thank team <a href="https://twitter.com/githubindia">@GitHubIndia</a> for organizing the conference! They definitely did a great job here _/_</p><p>oh! I forgot to mention, they even sent me some snacks to munch during the conference :)</p><p><img src="/images/gh-snacks.jpg" alt="gh-snacks"></p><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Last Saturday I had the chance to tick off one of the items from my wishlist - ‚ÄúGive a tech talk at a conference‚Äù.&lt;/p&gt;
&lt;p&gt;One of the most
      
    
    </summary>
    
    
      <category term="life" scheme="https://vishnubharathi.codes/tags/life/"/>
    
      <category term="conference" scheme="https://vishnubharathi.codes/tags/conference/"/>
    
      <category term="milestone" scheme="https://vishnubharathi.codes/tags/milestone/"/>
    
  </entry>
  
  <entry>
    <title>Mental models</title>
    <link href="https://vishnubharathi.codes/blog/mental-models/"/>
    <id>https://vishnubharathi.codes/blog/mental-models/</id>
    <published>2021-02-25T23:49:27.000Z</published>
    <updated>2021-04-01T23:08:49.025Z</updated>
    
    <content type="html"><![CDATA[<p>This post is inspired by <a href="https://www.julian.com/blog/mental-model-examples">Julian‚Äôs Mental Models</a>. I will use the explanation in that blog post to explain what it is: </p><blockquote><p>Mental models do two things: they help you assess how things work and they help you make better decisions.</p></blockquote><p>Good! Secretly I have been using mental models for a long long time. It‚Äôs just that I have never formalized and called it a name and probably forget about a model and move on to using/experimenting with some other model periodically. If you have a set of thoughts that you base your actions upon, then that is a mental model for you. I would like to think about Mental models as predicates in discrete mathematics (sorry for the math-y reference, but just couldn‚Äôt resist adding it here :D)</p><p>I used to not care about mental models when there was a trend on Twitter where people write threads about it. I think it was mostly because of the theoretical explanations. So, I am going to stop explaining what mental models and try to write about some mental models that I use/trying-to-use/like.</p><h2 id="Five-Whys"><a href="#Five-Whys" class="headerlink" title="Five Whys"></a>Five Whys</h2><p>This mental model even has a <a href="https://en.wikipedia.org/wiki/Five_whys">Wikipedia page</a> that describes it nicely.</p><blockquote><p>The technique was originally developed by Sakichi Toyoda and was used within the Toyota Motor Corporation during the evolution of its manufacturing methodologies. It is a critical component of problem-solving training, delivered as part of the induction into the Toyota Production System.</p></blockquote><p>I learned this technique from when I was working for <a href="https://www.shippable.com/">shippable.com</a> - a lot of work and how things operate inside the company was based on Toyota‚Äôs manufacturing process. They used to even refer to the term ‚ÄúSoftware Manufacturing‚Äù for the vision of what they want the product to do for software development.</p><p>Often I have found myself get to the answer to a problem in less than 5 whys. Sometimes going and fixing all the whys may not be in your control. So, chillax and fix what is within your control.</p><p>The technique is simple: Just ask the question ‚Äúwhy‚Äù five times when you are faced with a problem to find out the root-cause/real problem.</p><p>I use this technique to date to debug software. In fact, we used it just yesterday at work to debug <a href="https://github.com/hasura/graphql-engine/issues/6600">this issue</a>.</p><p>Why did the UI show the wrong version number? Because the base docker image sets an older version number.</p><p>Why is the base docker image setting an older version number? Because the CI build failed but continued anyway with a cached older image.</p><p>Why did the CI build fail but continue anyway? (found the bug in CI script that does not short-circuit on failure.)</p><p>Also did a parallel why based on the second answer.</p><p>Why did the CI build fail? Because there a command-line program that we used in the script was not found.</p><p>Why was the command-line program not found? Because the base image of the build image in CI changed to not have it.</p><p>‚Ä¶‚Ä¶</p><p>I can go all day asking why. haha - but I should say that I kind of abuse this technique most of the time like stopping with 3 whys in the interest of time and control. But that is fine and we just have to find peace somewhere, so this might as well be.</p><h2 id="First-Principles"><a href="#First-Principles" class="headerlink" title="First Principles"></a>First Principles</h2><p>This was mentioned in <a href="https://www.julian.com/blog/mental-model-examples">Julian‚Äôs post</a> and is famously used by Elon Musk. I am sure that there is a good chance that you might be using it too. Because I had been using it quite a while.</p><p>Remember those moments at work where you feel nothing is working out. This is one of the models to be used at those times.</p><p>‚ÄúWhat if nothing existed about this problem and you were to build a solution for it completely from scratch?‚Äù </p><p>Example: This software library does not have a feature or does not have the extensibility to add this feature. Ok! What if you wrote this library from scratch? What are your design decisions like in that case? Will your design accommodate the extensibility for the feature that you are aiming for?</p><p>This will try to sink you in deep thoughts - I mean the ones that you think about in the shower and make you ‚Äúforget if you applied soap to your legs‚Äù level of thought.</p><h2 id="Last-Principles"><a href="#Last-Principles" class="headerlink" title="Last Principles"></a>Last Principles</h2><p>First of all, I made up this name ‚ÄúLast Principles‚Äù - because this is the opposite of the first principles mental model.</p><p>But very often useful. You are doing this when you are googling for something.</p><p>When faced with a problem, asking how will I solve it if I were to start from scratch is the first principles approach. Instead, asking how has this problem been solved in various ways and using one of the ways is the last principles approach.</p><p>The last principles are a very critical mental model to have. Because that‚Äôs where the learning and experience happens. You get to see these awesome ways various people are solving the problem you have at hand. It might teach you the best practices and the knowledge that the field has accrued over time. </p><p>oh! and probably save you a ton of time.</p><p>Reading a research paper is last principles. I love the way those papers build upon the knowledge from their reference papers. That reference section is last principles. Getting what I mean? :D </p><h2 id="Regret-Minimization"><a href="#Regret-Minimization" class="headerlink" title="Regret Minimization"></a>Regret Minimization</h2><p>Popularised by Jeff Bezos - also has been mentioned in <a href="https://www.julian.com/blog/mental-model-examples">Julian‚Äôs post</a>. </p><p>Particularly helpful for making big decisions. </p><p>It is as simple as asking this question before undertaking big things:</p><p>‚ÄúWill I regret not doing this when I am old?‚Äù</p><h2 id="Minus-Five"><a href="#Minus-Five" class="headerlink" title="Minus Five"></a>Minus Five</h2><p>This is a mental model that I learned sometime back from <a href="https://en.wikipedia.org/wiki/Sridhar_Vembu">Sridhar Vembhu</a>. He has this advice for people wanting to bootstrap their own company, ‚ÄúStart from -5 years‚Äù - meaning start working for what you want to build 5 years before actually starting to build it. This includes saving up money for such a long period, gathering skillsets that you need for the business, etc.</p><p>The core idea that I understand from the minus five mindset is that in order to do anything substantially big in life, try to plan and save up for those times. Because you don‚Äôt want to enter the war zone unarmed.</p><h2 id="Measure-them"><a href="#Measure-them" class="headerlink" title="Measure them"></a>Measure them</h2><p>Picked up this mental model from Vinod Khosla. Been using this for a few weeks now and I feel good about it.</p><p>I am linking the awesome talk below from where I learned this.</p><iframe width="560" height="315" src="https://www.youtube.com/embed/HZcXup7p5-8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>The talk ends where he discusses work-life balance. He firmly believes that it is achievable but we just have to be disciplined about it. Vinod Khosla seems to schedule his time into 15 minutes slots. Early on he had 20 main categories and each 15-minute time slot can belong to one of those categories. One of the important categories for him was ‚Äúhaving dinner with family/kids‚Äù and he started by setting an impossible goal of 25 times per month and eventually achieved it in a year.</p><p>The key part is measuring how he spent his time to make time for something he thinks is very important.</p><p>So, if you are having this problem of ‚Äúnot finding enough time‚Äù, start by measuring time. Once you measure how you spend time, it is way simpler to identify the fluff and be very self-aware about how you are spending time.</p><p>Bonus: I use 1-hour slots, as that is easy to track and gives me more focus by avoiding context switching often.</p><h2 id="Lookout"><a href="#Lookout" class="headerlink" title="Lookout"></a>Lookout</h2><p>Alright, I am going to end this blog up here. I am always on the lookout for life lessons and mental models that make me better and help me. So if you have some mental models based on which you operate, send them my way. I will be happy to learn about them and possibly use them.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;This post is inspired by &lt;a href=&quot;https://www.julian.com/blog/mental-model-examples&quot;&gt;Julian‚Äôs Mental Models&lt;/a&gt;. I will use the explanati
      
    
    </summary>
    
    
      <category term="career advice" scheme="https://vishnubharathi.codes/tags/career-advice/"/>
    
      <category term="life" scheme="https://vishnubharathi.codes/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>Speeding up git clone</title>
    <link href="https://vishnubharathi.codes/blog/speeding-up-git-clone/"/>
    <id>https://vishnubharathi.codes/blog/speeding-up-git-clone/</id>
    <published>2021-02-03T02:23:04.000Z</published>
    <updated>2021-04-01T23:08:49.029Z</updated>
    
    <content type="html"><![CDATA[<p>Imagine that you need to take the latest source code of a project and deploy it somewhere by creating some artifacts with it. If it is a git project with a few commits, a simple <code>git clone .....</code> would do it. But if it is a project with thousands of commits, then you might be bored of your time waiting for the git clone to complete. This is often the case in CI/CD pipelines - that is where I ultimately learned this trick from :D</p><p>I recently discovered something called shallow clones in git. The idea is simple: instead of getting all the commits of a git repo, the shallow clone only gets the latest commit. The <code>--depth=N</code> flag seems to enable shallow cloning in git where N is the number of latest commits to be fetched.</p><p>Here is an example for comparing how much time you can save:</p><p>I tried cloning the Redis project - <a href="https://github.com/redis/redis">https://github.com/redis/redis</a> which had 10,009 commits while cloning.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ time git clone git@github.com:redis&#x2F;redis.git</span><br><span class="line">Cloning into &#39;redis&#39;...</span><br><span class="line">remote: Enumerating objects: 29, done.</span><br><span class="line">remote: Counting objects: 100% (29&#x2F;29), done.</span><br><span class="line">remote: Compressing objects: 100% (21&#x2F;21), done.</span><br><span class="line">remote: Total 71995 (delta 11), reused 17 (delta 8), pack-reused 71966</span><br><span class="line">Receiving objects: 100% (71995&#x2F;71995), 91.10 MiB | 375.00 KiB&#x2F;s, done.</span><br><span class="line">Resolving deltas: 100% (51230&#x2F;51230), done.</span><br><span class="line"></span><br><span class="line">real4m15.938s</span><br><span class="line">user0m13.796s</span><br><span class="line">sys0m2.875s</span><br></pre></td></tr></table></figure><p>So normal clone took <code>4 minutes and 15 seconds</code> to complete.</p><p>Here is the same thing but with a shallow clone</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ time git clone --depth&#x3D;1 git@github.com:redis&#x2F;redis.git</span><br><span class="line">Cloning into &#39;redis&#39;...</span><br><span class="line">remote: Enumerating objects: 937, done.</span><br><span class="line">remote: Counting objects: 100% (937&#x2F;937), done.</span><br><span class="line">remote: Compressing objects: 100% (843&#x2F;843), done.</span><br><span class="line">remote: Total 937 (delta 105), reused 568 (delta 70), pack-reused 0</span><br><span class="line">Receiving objects: 100% (937&#x2F;937), 2.58 MiB | 390.00 KiB&#x2F;s, done.</span><br><span class="line">Resolving deltas: 100% (105&#x2F;105), done.</span><br><span class="line"></span><br><span class="line">real0m12.802s</span><br><span class="line">user0m0.621s</span><br><span class="line">sys0m0.167s</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Just <code>12 seconds</code></p><p>So fast!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Imagine that you need to take the latest source code of a project and deploy it somewhere by creating some artifacts with it. If it is a 
      
    
    </summary>
    
    
      <category term="devops" scheme="https://vishnubharathi.codes/tags/devops/"/>
    
      <category term="productivity" scheme="https://vishnubharathi.codes/tags/productivity/"/>
    
      <category term="tools" scheme="https://vishnubharathi.codes/tags/tools/"/>
    
  </entry>
  
  <entry>
    <title>My blub study syllabus</title>
    <link href="https://vishnubharathi.codes/blog/my-blub-study-syllabus/"/>
    <id>https://vishnubharathi.codes/blog/my-blub-study-syllabus/</id>
    <published>2021-01-22T14:15:45.000Z</published>
    <updated>2021-04-01T23:08:49.025Z</updated>
    
    <content type="html"><![CDATA[<p>Few days back, I happened to read this blog post <a href="https://www.benkuhn.net/blub/">‚ÄúIn defense of blub studies‚Äù</a> by <a href="https://www.benkuhn.net/">Benkuhn</a> (one of my favorite bloggers). It introduced me to a new term called ‚Äúblub studies‚Äù. In case if you are not aware of it, I am going to copy paste a few lines from Ben‚Äôs post here.</p><blockquote><p>Blub studies is a never-ending treadmill of engineering know-how. It‚Äôs the fiddly technical details of how Git stores data, or how Postgres locking semantics caused your migration to bring down prod, or why pip install failed this time. It‚Äôs what goes on inside the boiler rooms of your computer.</p></blockquote><p>To put it simply - it is usually the boring stuff that you get away by googling and arriving at stack overflow. The idea is to learn things that help in day to day task instead of chasing the shiny new thing that got released yesterday on HN. we have underrated blub studies for a long time. I find it more satisfying to learn about them these days because they improve my workflow and speed in getting stuff done.</p><p>So, I am listing down my blub study syllabus below.</p><h2 id="Utils"><a href="#Utils" class="headerlink" title="Utils"></a>Utils</h2><ul><li style="list-style: none"><input type="checkbox"></input> <a href="https://www-users.york.ac.uk/~mijp1/teaching/2nd_year_Comp_Lab/guides/grep_awk_sed.pdf">grep, awk and sed ‚Äì three VERY useful command-line utilities</a></li><li style="list-style: none"><input type="checkbox"></input> <a href="https://www.gnu.org/software/sed/manual/sed.html">sed, a stream editor</a> - GNU software manual</li><li style="list-style: none"><input type="checkbox"></input> <a href="https://www.gnu.org/software/make/manual/make.html">GNU make</a> - GNU software manual</li></ul><h2 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h2><ul><li style="list-style: none"><input type="checkbox"></input> <a href="https://golang.org/doc/modules/managing-dependencies">Managing dependencies</a></li><li style="list-style: none"><input type="checkbox"></input> <a href="https://golang.org/doc/modules/developing">Developing and publishing modules</a></li></ul><p>(To be continued‚Ä¶.)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Few days back, I happened to read this blog post &lt;a href=&quot;https://www.benkuhn.net/blub/&quot;&gt;‚ÄúIn defense of blub studies‚Äù&lt;/a&gt; by &lt;a href=&quot;htt
      
    
    </summary>
    
    
      <category term="programming" scheme="https://vishnubharathi.codes/tags/programming/"/>
    
      <category term="tools" scheme="https://vishnubharathi.codes/tags/tools/"/>
    
      <category term="reading" scheme="https://vishnubharathi.codes/tags/reading/"/>
    
      <category term="wishlist" scheme="https://vishnubharathi.codes/tags/wishlist/"/>
    
  </entry>
  
  <entry>
    <title>Learning to SWIM</title>
    <link href="https://vishnubharathi.codes/blog/learning-to-swim/"/>
    <id>https://vishnubharathi.codes/blog/learning-to-swim/</id>
    <published>2021-01-03T03:52:20.000Z</published>
    <updated>2021-04-01T23:08:49.025Z</updated>
    
    <content type="html"><![CDATA[<p>I finished reading a research paper called ‚ÄúSWIM: Scalable Weakly-consistent Infection-style Process Group Membership Protocol‚Äù last night. This post is going to be about it. If you are here to read my experience about real-world swimming, I have disappointed you - I still don‚Äôt know to swim in waters, haha.</p><p>First, I started by reading the Raft paper and was trying to go through a few open-source RAft implementation libraries and see how those libraries are used in software that is currently used in production. The exploration included the following places:</p><ul><li><a href="https://github.com/hashicorp/raft">https://github.com/hashicorp/raft</a></li><li><a href="https://github.com/hashicorp/consul">https://github.com/hashicorp/consul</a></li><li><a href="https://github.com/hashicorp/nomad">https://github.com/hashicorp/nomad</a></li><li><a href="https://github.com/hashicorp/raft-mdb">https://github.com/hashicorp/raft-mdb</a></li></ul><p>Halfway through my Raft journey, I understood that Raft is a consensus algorithm - It is about making a few machines (a cluster) agree on something. But it does not deal with how machines could be added/removed in the cluster. So we need to handle cluster membership outside it. So I started digging the above libraries, I arrived at how cluster membership is done in some of the practical systems (mostly the Hashicorp stack).</p><p>Hashicorp seems to have <a href="https://github.com/hashicorp/serf">Serf</a> which could be used for performing cluster membership. More specifically it uses this <a href="https://github.com/hashicorp/memberlist">memberlist</a> library to do it which is based on this awesome research paper.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A. Das, I. Gupta and A. Motivala, &quot;SWIM: scalable weakly-consistent infection-style process group membership protocol,&quot; Proceedings International Conference on Dependable Systems and Networks, Washington, DC, USA, 2002, pp. 303-312, doi: 10.1109&#x2F;DSN.2002.1028914.</span><br></pre></td></tr></table></figure><p>Here are some of my notes on the SWIM paper. The SWIM paper starts with this nice quote:</p><blockquote><p>As you swim lazily through the milieu,</p><p>The secrets of the world will infect you.</p></blockquote><h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>The main motivation behind the SWIM paper is</p><blockquote><p>The SWIM effort is motivated by the unscalability of traditional heart-beating protocols, which either impose network loads that grow quadratically with group size, or compromise response times or false positive frequency w.r.t. detecting process crashes.</p></blockquote><p>Before SWIM, the norm is to use a simple many-to-many heart-beating protocol to propagate cluster membership in the cluster. Consider this example:</p><p>If the cluster has n nodes, then it needs to send a message to all the other (n-1) nodes. Hence we end up sending n*(n-1) messages across the network when we want to exchange information about cluster membership. This means that our network load (number of communications that happen on the cluster network) grows quadratically (n<sup>2</sup>) for a group of n nodes in the cluster.</p><p>Example of what we are dealing with here:</p><p>When there are 5 nodes, we will end up making 5<sup>2</sup> = 25 network communications. For 10, it will be 100 and for 100, it will be 10,000. Remember this is just for sharing the knowledge of what nodes are in the cluster. That‚Äôs too much and impractical.</p><p>SWIM avoids this quadratic growth.</p><h2 id="Performance-metrics"><a href="#Performance-metrics" class="headerlink" title="Performance metrics"></a>Performance metrics</h2><p>If we are designing a membership system for a cluster, the following performance metrics could be considered:</p><ul><li>Membership propagation speed (should be high)</li><li>Message load on the network (should be low)</li><li>Computation load on the process (should be low)</li><li>False failure detections (should be low)</li></ul><p>Typically we might want to have this in our monitoring system to figure out if something is going wrong with our membership system.</p><p>SWIM tries to give the following performance metrics:</p><blockquote><p>(1) imposes a constant message load per group member;</p><p>(2) detects a process failure in an (expected) constant time at some non-faulty process in the group;</p><p>(3) provides a deterministic bound (as a function of group size) on the local time that a non-faulty process takes to detect failure of another process;</p><p>(4) propagates membership updates, including information about failures, in infection-style (also gossip-style or epidemic-style [2, 8]); the dissemination latency in the group grows slowly (logarithmically) with the number of members;</p><p>(5) provides a mechanism to reduce the rate of false positives by ‚Äúsuspecting‚Äù a process before ‚Äúdeclaring‚Äù it as failed within the group.</p></blockquote><h2 id="Swimming"><a href="#Swimming" class="headerlink" title="Swimming"></a>Swimming</h2><p>I started describing the internal workings of SWIM here to get a deep understanding, but I kind of thought it to be a long-running note that might be lacking good diagrams and so I am adding some awesome sources that I am using to learn about SWIM. (that frees up my time to try to build some cool thing with it)</p><p>The first resource would be the <a href="https://www.cs.cornell.edu/projects/Quicksilver/public_pdfs/SWIM.pdf">SWIM paper</a> itself.</p><p>The second link would be the <a href="https://github.com/hashicorp/memberlist">hashicorp/memberlist</a> library source code that implements SWIM.</p><p>The next is one of the best ways to quickly get a taste for SWIM. It is a ‚Äúpapers we love‚Äù video presentation of the SWIM paper by Armon Dadgar from HashiCorp. (linked below) </p><iframe width="560" height="315" src="https://www.youtube.com/embed/bkmbWsDz8LM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>In the presentation, they mention the missing pieces of SWIM and arrive at improvements to SWIM which makes it production-ready. For example, SWIM implementation by the original paper authors was using 56 nodes, but Hashicorp‚Äôs implementation was tested in a production use-case having 2000+ nodes. In those massive number of node environments, we need to deal with rejoins efficiently, encryption, etc.</p><p>They took all these improvements and present a paper named <a href="https://arxiv.org/abs/1707.00788">Lifeguard: Local Health Awareness for More Accurate Failure Detection</a>. Furthermore, they created this project called <a href="https://www.serf.io">Serf</a> which builds on top of the memberlist library that can be tuned to have a raw SWIM implementation. So if we need a production-ready SWIM implementation, we might just use the Serf library.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I finished reading a research paper called ‚ÄúSWIM: Scalable Weakly-consistent Infection-style Process Group Membership Protocol‚Äù last nigh
      
    
    </summary>
    
    
      <category term="databases" scheme="https://vishnubharathi.codes/tags/databases/"/>
    
      <category term="research papers" scheme="https://vishnubharathi.codes/tags/research-papers/"/>
    
  </entry>
  
</feed>

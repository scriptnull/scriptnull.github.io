<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="Vishnu Bharathi">
<meta name="description" content="Ever since I decided to learn about the Java Ecosystem, I have been wanting to try out something practical. May be write a small app in Java and see how the experience would be. I came across a framework called Eclipse Vert.x few months back and decided to give it a try. So I ended up reading its documentation for few weekends and today morning. I am feeling a bit comfortable to write some code on Vert.">

<meta property="og:title" content="Vert.x First Attempt" />
<meta property="og:description" content="Ever since I decided to learn about the Java Ecosystem, I have been wanting to try out something practical. May be write a small app in Java and see how the experience would be. I came across a framework called Eclipse Vert.x few months back and decided to give it a try. So I ended up reading its documentation for few weekends and today morning. I am feeling a bit comfortable to write some code on Vert." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://vishnubharathi.codes/blog/vert.x-first-attempt/" />



<meta property="article:published_time" content="2018-07-03T06:10:38&#43;05:30"/>

<meta property="article:modified_time" content="2018-07-03T06:10:38&#43;05:30"/>












<title>


     Vert.x First Attempt 

</title>
<link rel="canonical" href="https://vishnubharathi.codes/blog/vert.x-first-attempt/">







<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="https://vishnubharathi.codes/css/reset.css?t=2018-07-29%2010%3a13%3a34.218539592%20%2b0530%20IST%20m%3d%2b0.106132478">
    <link rel="stylesheet" href="https://vishnubharathi.codes/css/pygments.css?t=2018-07-29%2010%3a13%3a34.218539592%20%2b0530%20IST%20m%3d%2b0.106132478">
    <link rel="stylesheet" href="https://vishnubharathi.codes/css/main.css?t=2018-07-29%2010%3a13%3a34.218539592%20%2b0530%20IST%20m%3d%2b0.106132478">
    
        <link rel="stylesheet" href="https://vishnubharathi.codes/css/override.css?t=2018-07-29%2010%3a13%3a34.218539592%20%2b0530%20IST%20m%3d%2b0.106132478">
    




<link rel="shortcut icon"

    href="https://vishnubharathi.codes/img/leaf.ico"

>








</head>


<body lang="en">

<section class="header">
    <div class="container">
        <div class="content">
            
            <a href="https://vishnubharathi.codes/"><img class="avatar" src="https://gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=50" rcset="https://gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=100 2x, https://gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=150 3x, https://gravatar.com/avatar/261fb0f50b7dea501c807ac01f242343?s=200 4x"></a>
            
            <a href="https://vishnubharathi.codes/"><div class="name">Vishnu Bharathi</div></a>
            
              <h3 class="self-intro">Programming &#43; Loves learning things</h3>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://vishnubharathi.codes/blog/"><span>Blog</span></a></li>
                    
                        <li class="nav-quotes"><a href="https://vishnubharathi.codes/quotes/"><span>Quotes</span></a></li>
                    
                        <li class="nav-books"><a href="https://vishnubharathi.codes/books/"><span>Books</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">
        
            <a href="//github.com/scriptnull" target="_blank" rel="noopener"><img class="icon" src="https://vishnubharathi.codes/img/github.svg" alt="github" /></a>
        

        
            <a href="//twitter.com/scriptnull" target="_blank" rel="noopener"><img class="icon" src="https://vishnubharathi.codes/img/twitter.svg" alt="twitter" /></a>
        

	
            <a href="//keybase.io/scriptnull" target="_blank" rel="noopener"><img class="icon" src="https://vishnubharathi.codes/img/keybase.svg" alt="keybase" /></a>
	

        

        

        
            <a href="//linkedin.com/in/scriptnull" target="_blank" rel="noopener"><img class="icon" src="https://vishnubharathi.codes/img/linkedin.svg" alt="linkedin" /></a>
        

        

        
            <a href="//instagram.com/vishnu.bharathi" target="_blank" rel="noopener"><img class="icon" src="https://vishnubharathi.codes/img/instagram.svg" alt="instagram" /></a>
        

        

        

        
            <a href="mailto:vishnubharathi04@gmail.com"><img class="icon" src="https://vishnubharathi.codes/img/email.svg" alt="email" /></a>
        

        

        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    Vert.x First Attempt

</div>

                    <div class="initials"><a href="https://vishnubharathi.codes/"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Tue Jul 3 2018 06:10:38 IST'>Jul 3, 2018</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>4 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                

<p>Ever since I decided to <a href="https://vishnubharathi.codes/blog/visit-the-old-to-understand-the-new/">learn about the Java Ecosystem</a>, I have been wanting to try out something practical. May be write a small app in Java and see how the experience would be. I came across a framework called <a href="https://vertx.io/">Eclipse Vert.x</a> few months back and decided to give it a try. So I ended up reading its documentation for few weekends and today morning. I am feeling a bit comfortable to write some code on Vert.x finally. Lets see how it goes!</p>

<blockquote>
<p>Eclipse Vert.x is a tool-kit for building reactive applications on the JVM.</p>
</blockquote>

<p>The main reasons to choose Vert.x:</p>

<ul>
<li>It is polyglot, I suppose &ldquo;x&rdquo; in Vert.x stands for any supported programming language.</li>
<li>It has awesome documentation.</li>
<li>Gives the bare minimum and could be extended as we like.</li>
</ul>

<blockquote>
<p>Vert.x is a toolkit, not an opinionated framework where we force you to do things in a certain way.</p>
</blockquote>

<ul>
<li>Event bus as communication medium between services. (More on this later, if possible)</li>
</ul>

<blockquote>
<p>The event bus is the nervous system of Vert.x</p>
</blockquote>

<h2 id="install">Install</h2>

<p>Used brew, as I am on macOS.</p>

<pre><code>brew install vert.x
</code></pre>

<p>Check <a href="https://vertx.io/download/">https://vertx.io/download/</a> for other download options.</p>

<h2 id="concept">Concept</h2>

<p>Lets say, I am trying to build a simple service that does CRUD of a table in a database. I call this table challenges. Here is a thought process on how this could be implemented.</p>

<p><img src="https://vishnubharathi.codes/images/vertx-challenges-service.png" alt="challenge service" /></p>

<h2 id="bootstrap">Bootstrap</h2>

<p>Let me start writing some code now. I am using <a href="http://start.vertx.io/">http://start.vertx.io/</a> to get a template project.</p>

<p>Coming from a JavaScript background, it feels very weird to download starter projects from webpages as zip packages. In the JS ecosystem, we usually have this baked into command line tools.</p>

<p>It didn&rsquo;t quite workout. I was able to run the sample web server verticle at least.</p>

<p>I am finally able to get autocomplete support, after fiddling for 15 minutes between IntelliJ IDEA, Eclipse, Atom, and VS Code.</p>

<p>VS Code did the magic!</p>

<p><img src="https://vishnubharathi.codes/images/java-vscode-autocomplete.png" alt="java-vscode-autocomplete" /></p>

<h2 id="code">Code</h2>

<p>I quickly wrote up event listeners in Java.</p>

<pre><code class="language-java">package codes.vishnubharathi.challenges;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.eventbus.EventBus;

public class MainVerticle extends AbstractVerticle {

    @Override
    public void start() throws Exception {
        EventBus ev = vertx.eventBus();
        ev.consumer(&quot;challenges.create&quot;, message -&gt; {
            System.out.println(&quot;challenges.create -&gt; message&quot; + message.body());
            message.reply(&quot;ack &quot; + message.body());
        });
        ev.consumer(&quot;challenges.update&quot;, message -&gt; {
            System.out.println(&quot;challenges.update -&gt; message&quot; + message.body());
            message.reply(&quot;ack &quot; + message.body());
        });
        ev.consumer(&quot;challenges.delete&quot;, message -&gt; {
            System.out.println(&quot;challenges.delete -&gt; message&quot; + message.body());
            message.reply(&quot;ack &quot; + message.body());
        });
    }
}
</code></pre>

<h2 id="test">Test</h2>

<p>To test of our service is listening for the events, I am going to use Vertx unit testing to deploy a verticle.</p>

<pre><code class="language-java">package codes.vishnubharathi.challenges;

import io.vertx.core.AbstractVerticle;
import io.vertx.core.eventbus.EventBus;
import io.vertx.ext.unit.TestSuite;
import io.vertx.ext.unit.report.ReportOptions;
import io.vertx.ext.unit.Async;
import io.vertx.ext.unit.TestOptions;

public class TestMainVerticle extends AbstractVerticle {

    @Override
    public void start() throws Exception {
        TestSuite suite = TestSuite.create(&quot;challenges_events&quot;);

        suite.before(context -&gt; {
            MainVerticle challengeVertx = new MainVerticle();
            vertx.deployVerticle(challengeVertx, context.asyncAssertSuccess());
        });

        suite.test(&quot;publish events&quot;, context -&gt; {
            EventBus ev = vertx.eventBus();
            Async async = context.async(3);
            ev.send(&quot;challenges.create&quot;, &quot;create payload&quot;, ar -&gt; {
                if (ar.succeeded()) {
                    context.assertEquals(ar.result().body(), &quot;ack create payload&quot;);
                    async.countDown();
                } else {
                    context.fail();
                }
            });
            ev.send(&quot;challenges.update&quot;, &quot;update payload&quot;, ar -&gt; {
                if (ar.succeeded()) {
                    context.assertEquals(ar.result().body(), &quot;ack update payload&quot;);
                    async.countDown();
                } else {
                    context.fail();
                }
            });
            ev.send(&quot;challenges.delete&quot;, &quot;delete payload&quot;, ar -&gt; {
                if (ar.succeeded()) {
                    context.assertEquals(ar.result().body(), &quot;ack delete payload&quot;);
                    async.countDown();
                } else {
                    context.fail();
                }
            });
        });

        TestOptions options = new TestOptions().addReporter(new ReportOptions().setTo(&quot;console&quot;));
        suite.run(options);
    }
}
</code></pre>

<p>Running the test using <code>vertx test TestMainVerticle.java</code> resulted in my tests getting passed.</p>

<pre><code>Begin test suite challenges_events
Begin test suite challenges_events
Begin test publish events
Begin test publish events
challenges.create -&gt; messagecreate payload
challenges.update -&gt; messageupdate payload
challenges.delete -&gt; messagedelete payload
Passed publish events
Passed publish events
End test suite challenges_events , run: 1, Failures: 0, Errors: 0
End test suite challenges_events , run: 1, Failures: 0, Errors: 0
Succeeded in deploying verticle
</code></pre>

<p>(no idea why &ldquo;Begin test suite challenges_events&rdquo; is being printed twice.)</p>

<p>Anyways, I have a basic setup for my application ready. I hope to complete my handler logics afterwards. Bye until then!</p>

                <br>
                
                  <div class="tags">
                    <strong>Tags:</strong>
                  
                    <a href="https://vishnubharathi.codes/tags/java">java</a>
                  
                    <a href="https://vishnubharathi.codes/tags/jvm">jvm</a>
                  
                    <a href="https://vishnubharathi.codes/tags/vertx">vertx</a>
                  
                    <a href="https://vishnubharathi.codes/tags/microservices">microservices</a>
                  
                    <a href="https://vishnubharathi.codes/tags/api">api</a>
                  
                  </div>
                  <br />
                
                <p class="back-to-posts"><a href="https://vishnubharathi.codes/blog/">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
            
        </div>
    </div>
</section>



<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-64308743-3', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>





</body>
</html>

